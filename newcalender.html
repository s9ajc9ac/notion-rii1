<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Illustrated Calendar</title>
    <!-- 引入复古衬线字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=IM+Fell+DW+Pica&display=swap" rel="stylesheet">
    <style>
        :root {
            --paper-texture: #fdf6e3;
            --ink-color: #2c241b;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            /* 默认背景色，JS会动态修改它 */
            background-color: #ffe4d1; 
            font-family: 'Cormorant Garamond', serif;
            overflow: hidden;
            transition: background-color 1.2s ease; /* 背景色切换时的柔和过渡 */
        }

        /* --- 全局纹理层 (覆盖整个屏幕) --- */
        body::after {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 1000;
            opacity: 0.15; /* 调整全局噪点浓度 */
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E");
        }

        /* 画框容器 */
        .calendar-card {
            width: 100%;
            max-width: 450px;
            aspect-ratio: 3/4;
            background: var(--paper-texture); /* 画纸本身的颜色 */
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.15); /* 加深阴影，突显层次 */
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border-radius: 2px; /* 极小的圆角模拟纸张裁剪 */
        }

        /* --- 卡片内部纹理层 (叠加效果) --- */
        .card-texture {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 50;
            opacity: 0.4;
            pointer-events: none;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.5'/%3E%3C/svg%3E");
            mix-blend-mode: multiply;
        }

        /* --- 动态插画层 --- */
        .art-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1;
        }

        /* 天空与阳光 */
        .sky {
            width: 100%;
            height: 70%;
            position: absolute;
            top: 0;
            transition: background 1s ease;
        }

        .sun-rays {
            position: absolute;
            top: 20%;
            left: -10%;
            width: 120%;
            height: 100%;
            background: repeating-conic-gradient(
                from 0deg at 20% 50%, 
                transparent 0deg, 
                transparent 2deg, 
                rgba(255,255,255,0.25) 3deg, 
                rgba(255,255,255,0.25) 5deg
            );
            mask-image: radial-gradient(circle at 20% 50%, transparent 10%, black 60%);
            -webkit-mask-image: radial-gradient(circle at 20% 50%, transparent 10%, black 60%);
        }

        .the-sun {
            position: absolute;
            width: 130px;
            height: 130px;
            border-radius: 50%;
            background: #fffdf0;
            box-shadow: 0 0 50px rgba(255,255,220, 0.6);
            top: 45%;
            left: 10%;
            transform: translateY(-50%);
            transition: background 1s ease;
        }

        /* 地面 */
        .ground {
            width: 100%;
            height: 35%;
            position: absolute;
            bottom: 0;
            z-index: 2;
            transition: background 1s ease;
            background-image: repeating-linear-gradient(90deg, transparent, transparent 10px, rgba(255,255,255,0.15) 12px);
        }

        /* --- 角色剪影 (CSS Art) --- */
        .characters {
            position: absolute;
            bottom: 6%;
            right: 6%;
            width: 300px;
            height: 150px;
            z-index: 3;
            display: flex;
            align-items: flex-end;
            justify-content: flex-end;
            filter: drop-shadow(2px 2px 0px rgba(0,0,0,0.1));
        }

        .moomin {
            width: 60px; height: 80px;
            background: #fdfdfd;
            border-radius: 40% 40% 10% 10%;
            margin-right: -10px;
        }
        .moomin::before { content: ''; position: absolute; top: -5px; left: 5px; width: 10px; height: 15px; background: inherit; border-radius: 50%; }
        .moomin::after { content: ''; position: absolute; top: 20px; left: -15px; width: 25px; height: 30px; background: inherit; border-radius: 20px; }

        .snufkin {
            width: 50px; height: 70px;
            background: #556B2F;
            border-radius: 20% 20% 5px 5px;
            margin-right: 15px; position: relative; z-index: 2;
        }
        .snufkin-hat {
            position: absolute; top: -20px; left: -15px; width: 0; height: 0;
            border-left: 40px solid transparent; border-right: 40px solid transparent;
            border-bottom: 30px solid #4a5d29;
        }

        .papa {
            width: 65px; height: 90px;
            background: #fdfdfd;
            border-radius: 40% 40% 10% 10%; position: relative;
        }
        .top-hat {
            position: absolute; top: -25px; left: 10px; width: 40px; height: 35px; background: #222;
        }
        .top-hat::after {
            content: ''; position: absolute; bottom: 0; left: -10px; width: 60px; height: 5px; background: #222;
        }

        /* --- 日历数据层 --- */
        .calendar-layer {
            position: relative;
            z-index: 10;
            padding: 40px 30px;
            text-align: center;
            height: 100%;
            display: flex;
            flex-direction: column;
            color: var(--ink-color);
        }

        .month-header { margin-bottom: 10px; }

        .month-number {
            font-size: 3.2rem;
            font-family: 'IM Fell DW Pica', serif;
            display: block; line-height: 1;
            text-shadow: 0 0 30px rgba(255,255,255,0.5); /* 防止被太阳背景吃掉 */
        }

        .month-name {
            font-size: 0.95rem; text-transform: uppercase; letter-spacing: 3px;
            font-weight: 600; opacity: 0.8; margin-top: 5px; display: block;
        }

        /* 网格 */
        .grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 12px 0;
            margin-top: 25px;
            text-shadow: 0 0 20px rgba(255,255,255,0.9); 
        }

        .weekday {
            font-size: 0.65rem; text-transform: uppercase; letter-spacing: 1px;
            margin-bottom: 15px; opacity: 0.7; color: #5d4037;
        }

        .day {
            font-size: 1rem; height: 30px;
            display: flex; justify-content: center; align-items: center;
            font-weight: 600; cursor: default;
        }

        /* 当前日期高亮 (Today) */
        .day.today {
            position: relative;
            color: #d84315;
        }
        .day.today::after {
            content: ''; position: absolute; bottom: 2px;
            width: 4px; height: 4px; background: #d84315; border-radius: 50%;
        }

        /* 周末变色 */
        .day:nth-child(7n), .day:nth-child(7n+1) { color: #8b4513; }
        .grid .weekday:nth-child(7n), .grid .weekday:nth-child(7n-6) { color: #8b4513; }

        /* 底部隐形控制条 */
        .controls {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 50px;
            z-index: 200; opacity: 0; transition: opacity 0.3s;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 20px;
        }
        .calendar-card:hover .controls { opacity: 1; }
        .ctrl-btn {
            background: rgba(255,255,255,0.6); border: none; cursor: pointer;
            width: 30px; height: 30px; border-radius: 50%; font-weight: bold;
            color: var(--ink-color); display: flex; justify-content: center; align-items: center;
        }
        .ctrl-btn:hover { background: white; }

    </style>
</head>
<body>

<div class="calendar-card">
    <div class="card-texture"></div>
    
    <!-- 艺术背景 -->
    <div class="art-layer">
        <div class="sky" id="art-sky">
            <div class="sun-rays"></div>
            <div class="the-sun" id="art-sun"></div>
        </div>
        <div class="ground" id="art-ground"></div>
        
        <!-- 角色剪影 -->
        <div class="characters">
            <div class="snufkin"><div class="snufkin-hat"></div></div>
            <div class="moomin"></div>
            <div class="papa"><div class="top-hat"></div></div>
        </div>
    </div>

    <!-- 日历内容 -->
    <div class="calendar-layer">
        <div class="month-header">
            <span class="month-number" id="disp-month-num"></span>
            <span class="month-name" id="disp-month-name"></span>
        </div>

        <div class="grid" id="calendar-grid">
            <!-- JS 生成 -->
        </div>
    </div>

    <!-- 切换控制 -->
    <div class="controls">
        <button class="ctrl-btn" onclick="changeMonth(-1)">❮</button>
        <button class="ctrl-btn" onclick="changeMonth(1)">❯</button>
    </div>
</div>

<script>
    // --- 季节色板配置 ---
    // bg: body背景色 (单色，带灰度，模拟纸张)
    // sky: 卡片内天空渐变
    // ground: 卡片内地板色
    // sun: 太阳颜色
    const THEMES = [
        // 1月: 杏色/暖阳 (Reference Style)
        { bg: '#e8dcd6', sky: 'linear-gradient(to bottom, #ffe4d1, #ffccb3)', ground: '#d98e73', sun: '#fffdf0' },
        // 2月: 冰蓝/冷清
        { bg: '#dbe7ee', sky: 'linear-gradient(to bottom, #e3f2fd, #bbdefb)', ground: '#f0faff', sun: '#fdfbf7' },
        // 3月: 嫩黄/早春
        { bg: '#eeedda', sky: 'linear-gradient(to bottom, #fff9c4, #f0f4c3)', ground: '#dcedc8', sun: '#fff176' },
        // 4月: 柔粉/樱花
        { bg: '#ede0e4', sky: 'linear-gradient(to bottom, #fce4ec, #f8bbd0)', ground: '#c5e1a5', sun: '#ffecb3' },
        // 5月: 清绿/初夏
        { bg: '#dcede4', sky: 'linear-gradient(to bottom, #e0f7fa, #b2ebf2)', ground: '#a5d6a7', sun: '#fff9c4' },
        // 6月: 明蓝/晴空
        { bg: '#dae6ed', sky: 'linear-gradient(to bottom, #b3e5fc, #81d4fa)', ground: '#fff59d', sun: '#ffee58' },
        // 7月: 橙黄/盛夏
        { bg: '#eee6d4', sky: 'linear-gradient(to bottom, #ffecb3, #ffca28)', ground: '#4fc3f7', sun: '#ffeb3b' },
        // 8月: 湖绿/夏末
        { bg: '#dceeea', sky: 'linear-gradient(to bottom, #e0f2f1, #80cbc4)', ground: '#f0f4c3', sun: '#fff59d' },
        // 9月: 麦色/秋收
        { bg: '#ebe3d9', sky: 'linear-gradient(to bottom, #f3e5f5, #ce93d8)', ground: '#ffcc80', sun: '#ffccbc' },
        // 10月: 陶土/万圣
        { bg: '#e8ddd6', sky: 'linear-gradient(to bottom, #ffe0b2, #ffb74d)', ground: '#8d6e63', sun: '#ffe082' },
        // 11月: 灰调/初冬
        { bg: '#e0e0e0', sky: 'linear-gradient(to bottom, #eceff1, #cfd8dc)', ground: '#bcaaa4', sun: '#fffde7' },
        // 12月: 靛青/深冬
        { bg: '#dce0e8', sky: 'linear-gradient(to bottom, #c5cae9, #9fa8da)', ground: '#eeeeee', sun: '#fff9c4' },
    ];

    // --- 日历核心逻辑 ---
    
    // 获取当前真实时间作为起点
    let datePointer = new Date(); 
    // 仅仅为了记录"今天"在哪里，用于高亮
    const realToday = new Date();

    function init() {
        renderCalendar();
    }

    function renderCalendar() {
        const year = datePointer.getFullYear();
        const month = datePointer.getMonth(); // 0-11
        
        // 1. 应用主题 (背景色同步)
        const theme = THEMES[month];
        document.body.style.backgroundColor = theme.bg; // 页面背景
        document.getElementById('art-sky').style.background = theme.sky;
        document.getElementById('art-ground').style.background = theme.ground;
        document.getElementById('art-sun').style.background = theme.sun;

        // 2. 更新标题
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        // 罗马数字转换 (1-12)
        const romans = ["I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX", "X", "XI", "XII"];
        
        document.getElementById('disp-month-num').innerText = romans[month]; // 使用罗马数字更符合插画风
        document.getElementById('disp-month-name').innerText = `${monthNames[month]} ${year}`;
        
        // 3. 生成日期网格
        const grid = document.getElementById('calendar-grid');
        grid.innerHTML = '';

        // 星期头
        const weekDays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
        weekDays.forEach(day => {
            const div = document.createElement('div');
            div.className = 'weekday';
            div.innerText = day;
            grid.appendChild(div);
        });

        // 计算当月第一天是周几
        const firstDayDate = new Date(year, month, 1);
        let startDay = firstDayDate.getDay(); 
        if (startDay === 0) startDay = 7; 
        startDay -= 1; // 0(Mon) - 6(Sun)

        // 计算当月天数
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        // 填充空白
        for (let i = 0; i < startDay; i++) {
            const div = document.createElement('div');
            grid.appendChild(div);
        }

        // 填充日期
        for (let i = 1; i <= daysInMonth; i++) {
            const div = document.createElement('div');
            div.className = 'day';
            div.innerText = i;

            // 检查是否是"今天"
            if (year === realToday.getFullYear() && 
                month === realToday.getMonth() && 
                i === realToday.getDate()) {
                div.classList.add('today');
            }

            grid.appendChild(div);
        }
    }

    // 切换月份 (支持跨年)
    function changeMonth(step) {
        // 设置日期为当月1号，避免因31号跳到无31号的月份产生BUG
        datePointer.setDate(1); 
        datePointer.setMonth(datePointer.getMonth() + step);
        renderCalendar();
    }

    // 启动
    init();

</script>

</body>
</html>
