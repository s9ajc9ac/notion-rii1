<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vintage Apple Energy</title>
    <!-- 引入更有质感的复古字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@1,600&family=IM+Fell+DW+Pica&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-teal: #C3E6E2;       /* 参考图背景色 */
            --outline-red: #D84315;   /* 铅笔红 */
            --fill-cream: #FFFDE7;    /* 苹果肉色 */
            --fill-yellow: #FFEE58;   /* 进度颜色 */
            --paper-texture: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.4'/%3E%3C/svg%3E");
        }

        body {
            margin: 0; padding: 0; width: 100vw; height: 100vh;
            display: flex; justify-content: center; align-items: center;
            background-color: var(--bg-teal);
            overflow: hidden;
        }

        /* 全局纸张噪点 (关键：制造画纸感) */
        .texture-layer {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background-image: var(--paper-texture);
            mix-blend-mode: overlay;
            pointer-events: none; z-index: 100;
        }

        .container {
            position: relative; width: 320px; height: 320px;
            display: flex; justify-content: center; align-items: center;
        }

        /* 苹果主体 */
        .apple-wrapper {
            width: 100%; height: 100%;
            position: relative;
            filter: drop-shadow(5px 5px 0px rgba(0,0,0,0.05)); /* 极淡的阴影 */
        }

        svg { overflow: visible; }

        /* 线条风格：模拟彩色铅笔 */
        .sketch-stroke {
            fill: none;
            stroke: var(--outline-red);
            stroke-width: 2.5;
            stroke-linecap: round;
            stroke-linejoin: round;
            filter: url(#pencil-texture); /* 关键：线条毛糙感 */
        }

        /* 进度填充区 */
        .progress-fill {
            fill: var(--fill-cream);
            transition: y 1s ease-in-out;
        }

        /* 装饰飞鸟 (线条更细更优雅) */
        .bird { position: absolute; z-index: 10; opacity: 0.9; }
        .bird path { 
            fill: none; stroke: var(--outline-red); stroke-width: 2; 
            stroke-linecap: round; filter: url(#pencil-texture);
        }
        
        .bird-1 { top: 10%; right: 10%; width: 40px; transform: rotate(15deg); }
        .bird-2 { bottom: 15%; left: 5%; width: 35px; transform: rotate(-10deg); }
        .bird-3 { top: 40%; left: 40%; width: 50px; opacity: 0.6; } /* 内部的鸟 */

        /* 文字信息 (排版优化) */
        .info-box {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 50;
            color: var(--outline-red);
            mix-blend-mode: multiply; /* 正片叠底，像印在纸上 */
        }

        .year-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.2rem;
            font-style: italic;
            letter-spacing: 2px;
            margin-bottom: -5px;
        }

        .percent-text {
            font-family: 'IM Fell DW Pica', serif;
            font-size: 3.5rem;
            line-height: 1;
        }
        
        .label-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 5px;
        }

    </style>
</head>
<body>

<div class="texture-layer"></div>

<div class="container">
    <div class="apple-wrapper">
        <svg viewBox="0 0 200 200">
            <!-- 滤镜定义：制造铅笔线条的粗糙感 -->
            <defs>
                <filter id="pencil-texture" x="-20%" y="-20%" width="140%" height="140%">
                    <feTurbulence type="fractalNoise" baseFrequency="1.2" numOctaves="3" result="noise" />
                    <feDisplacementMap in="SourceGraphic" in2="noise" scale="2" />
                </filter>
                
                <!-- 苹果形状路径 -->
                <path id="apple-path" d="M100,40 C80,10 20,10 20,80 C20,150 70,190 100,190 C130,190 180,150 180,80 C180,10 120,10 100,40" />
                
                <clipPath id="apple-clip">
                    <use xlink:href="#apple-path" />
                </clipPath>
            </defs>

            <!-- 1. 苹果底色 (类似画纸原本的颜色) -->
            <path d="M100,40 C80,10 20,10 20,80 C20,150 70,190 100,190 C130,190 180,150 180,80 C180,10 120,10 100,40" 
                  fill="rgba(255,255,255,0.3)" />

            <!-- 2. 进度液体 (蜡笔涂抹质感) -->
            <!-- 这里用了一个很大的矩形作为水位，通过 clip-path 限制在苹果内 -->
            <rect id="liquid" x="0" y="200" width="200" height="200" 
                  clip-path="url(#apple-clip)" 
                  fill="#FFF59D" 
                  style="transition: y 1.5s cubic-bezier(0.4, 0, 0.2, 1);" />

            <!-- 3. 苹果轮廓线 (放在最上层) -->
            <use xlink:href="#apple-path" class="sketch-stroke" />
            
            <!-- 果梗 -->
            <path d="M100,40 Q110,10 130,5" class="sketch-stroke" fill="none" />
            <!-- 高光装饰线 (模仿手绘痕迹) -->
            <path d="M40,60 Q30,80 35,100" class="sketch-stroke" style="opacity:0.5; stroke-width:1;" />
        </svg>
        
        <!-- 装饰飞鸟 (SVG) -->
        <div class="bird bird-1">
            <svg viewBox="0 0 100 60"><path d="M10,30 Q30,10 50,30 T90,30" /></svg>
        </div>
        <div class="bird bird-2">
            <svg viewBox="0 0 100 60"><path d="M10,30 Q30,50 50,30 T90,30" /></svg>
        </div>
        <div class="bird bird-3">
            <svg viewBox="0 0 100 60"><path d="M10,30 Q40,10 60,40" stroke-dasharray="2,2"/></svg>
        </div>
    </div>

    <div class="info-box">
        <div class="year-text" id="current-year">2026</div>
        <div class="percent-text" id="percent">0%</div>
        <div class="label-text">Energy</div>
    </div>
</div>

<script>
    function update() {
        const now = new Date();
        const year = now.getFullYear();
        const start = new Date(year, 0, 1);
        const end = new Date(year + 1, 0, 1);
        const percent = (now - start) / (end - start);
        
        // 更新文字
        document.getElementById('current-year').innerText = year;
        document.getElementById('percent').innerText = (percent * 100).toFixed(1) + "%";
        
        // 更新水位 (SVG rect 的 y 坐标)
        // 0%时 y=200 (底部), 100%时 y=0 (顶部)
        const yPos = 200 - (percent * 200);
        document.getElementById('liquid').setAttribute('y', yPos);
    }
    
    update();
    // 没必要每秒刷，每分钟刷一次足够
    setInterval(update, 60000);
</script>

</body>
</html>
